{{slugArray = url | explode('/')}}
{{theTeam = slugArray[1] | explode("-")}}
{{gender = theTeam[0]}}
{{jvOrVarsity = theTeam[1]}}
{{finalTeam = gender + "_" + jvOrVarsity | camelize}}
{{scheduleType = slugArray[2]}}

{{scheduleTeamTitle = ""}}
{{if jvOrVarsity == "jv"}}
    {{scheduleTeamTitle = "JV"}}
{{else if jvOrVarsity == "varsity"}}
    {{scheduleTeamTitle = "Varsity"}}
{{/if}}


{{currentDate = ""}}
{{if gender == "boys"}}
    {{currentDate = site_data:current_boys_year}}
{{else}}
    {{currentDate = site_data:current_girls_year}}
{{/if}}



<section class="mx-auto flex flex-col mt-4 w-full lg:w-3/12 bg-white">
    {{partial:section_heading title="{currentDate} {gender | ucfirst} {scheduleTeamTitle} Schedule"}}
    <div class="flex border-b border-slate-300">
        <button class="w-full py-2 px-4 scheduleSelectorBtn border-r border-slate-300 {{if scheduleType == "u"}} border-b-2 border-b-primary-500 font-bold {{/if}} " id="upcoming">Upcoming</button>
        <button class="w-full py-2 px-4 scheduleSelectorBtn {{if scheduleType == "r"}} border-b-2 border-b-primary-500 font-bold {{/if}} " id="results" >Results</button>
    </div>

    {{if scheduleType == "u"}}
        {{collection:games team:is="{finalTeam}" year:is="{currentYear}"  as="schedule"}}

            {{if schedule | is_empty}}
                <p class="p-2">There are no upcoming games at this time.</p>
            {{else}}
                {{schedule }}
                    {{if date | is_future || date | is_today}}
                        {{partial:scheduleWidgetGame}}
                    {{/if}}

                {{/schedule}}
            {{/if}}
        {{/collection:games}}
    {{else if scheduleType == "r"}}
        {{collection:games team:is="{finalTeam}" year:is="{currentYear}" as="schedule"}}
            {{if schedule | is_empty}}
                <p class="p-2">Sorry, no results at this time.</p>
            {{else}}
                {{schedule}}
                    {{if date | is_past && date | is_today == false}}
                        {{partial:scheduleWidgetGame}}
                    {{/if}}
                {{/schedule}}
            {{/if}}
        {{/collection:games}}
    {{/if}}


</section>  

